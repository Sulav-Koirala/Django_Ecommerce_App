<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <style>
        .list {
            display: flex;
            flex-direction: column;
            border:2px solid grey;
            box-shadow: 0px 4px 6px rgba(0,0,0,0.3);
        }
        .description {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            grid-gap: 20px;
            box-shadow: 0px 4px 6px rgba(0,0,0,0.3);
            padding: 10px;
        }
        .description p{
            color:black;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 10px;
        }

    </style>
    <script>
    const isAdminUser = {{ isadminuser|yesno:'true,false' }};
    </script>
    {% load static %}
    <script src="{% static 'store/products.js' %}" defer></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="{% static 'store/cart_jquery.js' %}" defer></script>
</head>
<body>
    <h2>Welcome to my ecommerce app</h2>

    <h3>Available Products list</h3>

    <div class="list" id="list"></div>
    <br><br>

    {% if isadminuser %}
    <button id="addproducts" onclick="add_product()">Add Product</button>
    <div id="add-container" style="display: none; margin-top: 10px;">
        <input type="text" id="name" placeholder="Product Name" required><br><br>
        <input type="number" id="price" min="0" step="0.01" placeholder="Price" required><br><br>
        <input type="number" id="quantity" min="1" step="1" placeholder="Quantity" required><br><br>
        <button type="submit" id="submit">Add</button>
    </div>
    
    <div id="update-container" style="display:none; margin-top:10px;">
        <input type="hidden" id="update-id">
        <input type="text" id="update-name" placeholder="Product Name" required readonly><br><br>
        <input type="number" id="update-price" min="0" step="0.01" placeholder="Price" required><br><br>
        <input type="number" id="update-quantity" min="1" step="1" placeholder="Quantity" required><br><br>
        <button type="button" id="update-submit">Update</button>
    </div>
    {% endif %}
    <br><br>
    <div id="cart" class="list" style="display: none; margin-top: 10px;"><span style="font-size: 30px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: bold; text-decoration: underline;">Cart</span>
    <div id="cart-items"></div>
    <hr>
    <div id="cart-total" style="font-size: 22px; font-weight: bold;"></div>
    </div>
    <br><br>
    <a style="border: 2px solid grey; background-color: lightgrey; color:black" href="{% url 'store:logout' %}">log out</a>
</body>
</html>